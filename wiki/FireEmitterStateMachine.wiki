#summary The state machine for individual fire emitters in the gamemodel

= Fire Emitter State Machine =

|| || *Off* || *P1_ATK* || *P2_ATK* || *P1_ATK_P2_ATK* || *P1_BLK* || *P2_BLK* || *P1_ATK_BLK* || *P2_ATK_BLK* || *Blocked(nextState)* ||
|| *On(1, ATK)* ||P1_ATK||P1_ATK||P1_ATK_P2_ATK||P1_ATK_P2_ATK||P1_ATK_BLK|| _Blocked(P2_BLK)_ ||P1_ATK_BLK|| _Blocked(P2_ATK_BLK)_ ||nextState||
|| *On(1, BLK)* ||P1_BLK||P1_ATK_BLK|| Blocked(P1_BLK) ||Blocked(P1_ATK_BLK)||P1_BLK||ERROR||P1_ATK_BLK||ERROR||nextState||
|| *On(2, ATK)* ||P2_ATK||P1_ATK_P2_ATK||P2_ATK||P1_ATK_P2_ATK|| _Blocked(P1_BLK)_ ||P2_ATK_BLK|| _Blocked(P1_ATK_BLK)_ ||P2_ATK_BLK||nextState||
|| *On(2, BLK)* ||P2_BLK|| Blocked(P2_BLK)||P2_ATK_BLK||Blocked(P2_ATK_BLK)||ERROR||P2_BLK||ERROR||P2_ATK_BLK||nextState||
|| *Off(1, ATK)* ||Off||Off||P2_ATK||P2_ATK||P1_BLK||P2_BLK||P1_BLK||P2_ATK_BLK||nextState||
|| *Off(1, BLK)* ||Off||P1_ATK||P2_ATK||P1_ATK_P2_ATK||Off||P2_BLK||P1_ATK||P2_ATK_BLK||nextState||
|| *Off(2, ATK)* ||Off||P1_ATK||Off||P1_ATK||P1_BLK||P2_BLK||P1_ATK_BLK||P2_BLK||nextState||
|| *Off(2, BLK)* ||Off||P1_ATK||P2_ATK||P1_ATK_P2_ATK||P1_BLK||Off||P1_ATK_BLK||P2_ATK||nextState||

== Events ==
*On(1, ATK)* : Player 1 has an attack that has just entered the emitter and is requesting to turn the emitter on so that it has an attack flame owned by player 1.

*On(1, BLK)* : Player 1 has a block that has just entered the emitter and is requesting to turn the emitter on so that it has a block flame owned by player 1.

*On(2, ATK)* : Player 2 has an attack that has just entered the emitter and is requesting to turn the emitter on so that it has an attack flame owned by player 2.

*On(2, BLK)* : Player 2 has a block that has just entered the emitter and is requesting to turn the emitter on so that it has a block flame owned by player 2.

*Off(1, ATK)* : Player 1 has an attack that has just exited the emitter and is requesting to turn the emitter off so that it no longer has an attack flame owned by player 1.

*Off(1, BLK)* : Player 1 has a block that has just exited the emitter and is requesting to turn the emitter off so that it no longer has a block flame owned by player 1.

*Off(2, ATK)* : Player 2 has an attack that has just exited the emitter and is requesting to turn the emitter off so that it no longer has an attack flame owned by player 2.

*Off(2, BLK)* : Player 2 has a block that has just exited the emitter and is requesting to turn the emitter off so that it no longer has a block flame owned by player 2.

== States ==

*Off* : The fire emitter is turned off completely.

*P1_ATK* : The fire emitter is turned on, only for an attack flame owned by player 1. 

*P2_ATK* : The fire emitter is turned on, only for an attack flame owned by player 2.

*P1_ATK_P2_ATK* : The fire emitter is turned on for attack flames owned by players 1 and 2.

*P1_BLK* : The fire emitter is turned on, only for a block flame owned by player 1. 

*P2_BLK* : The fire emitter is turned on, only for a block flame owned by player 2. 

*P1_ATK_BLK* : The fire emitter is turned on for an attack and block flame owned by player 1.

*P2_ATK_BLK* : The fire emitter is turned on for an attack and block flame owned by player 2.

*Blocked(nextState)* : A block occurred - this is a transitory state and currently it immediately transitions to the given nextState.

NOTE: Blocks in italics are "perfect" blocks i.e., they existed before th attack go there and are therefore as effective as possible. The other blocks are subject to the game rules on block timing.
