#summary description of the serial protocol

= Introduction =

This is, right now, a collection of non-binding ideas that may change completely.


= Protocol =

ADDR:DATA

ADDR can be the source or destination address depending on whether it is an input or output node, i.e. an output node will put its own address in the field when sending data, and listen for messages with its address. Input nodes will listen for messages from certain addresses (e.g. the server will aggregate 1L/1R/1H/2L/2R/2H data).

DATA should be simple readable / regex-parseable text until we decide that this is way too slow (in terms of parsing or sending the data over the network) and need to pack it.

Node addresses:
 * 1L : Player 1 left glove
 * 1R : Player 1 right glove
 * 1H : Player 1 headset
 * 2L : Player 2 left glove
 * 2R : Player 2 right glove
 * 2H : Player 2 headset
 * 1C : Player 1 fire color control
 * 2C : Player 2 fire color control
 * FI : Fire control

Gloves:
 `1L:roll,pitch,yaw,accelx,accely,accelz,gyrox,gyroy,gyroz,magx,magy,magz`

Headsets:
 `1H:link,attention,meditation,band1,band2,band3,band4,band5,band6,band7,band8`
 * Maybe headsets have lights/outputs and can receive commands too?
  * Att>80, Med>80, special, gesture received, ...?

Fire and color control:
 `xx:y`
 * xx is the device node to control
 * y is a simple wifire16 command:
  * `[`0-9a-f`]` toggles channel 1 - 16
  * ? requests armed state
  * + means system is armed (sent from the device)
  * - means system is not armed (sent from the device)
  * x turns all channels off
  * do we want an explicit on/off command for each channel?